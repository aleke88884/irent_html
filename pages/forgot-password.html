<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Восстановление пароля - iRent</title>
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .reset-illustration {
            width: 120px;
            height: 120px;
            background: rgba(245, 124, 0, 0.1);
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto var(--spacing-lg);
        }

        .reset-illustration i {
            font-size: 3rem;
            color: var(--primary);
        }

        .step-indicator {
            display: flex;
            justify-content: center;
            gap: var(--spacing-sm);
            margin-bottom: var(--spacing-xl);
        }

        .step-dot {
            width: 8px;
            height: 8px;
            border-radius: var(--radius-full);
            background: var(--gray-300);
        }

        .step-dot.active {
            width: 24px;
            background: var(--primary);
        }

        .code-inputs {
            display: flex;
            gap: var(--spacing-sm);
            justify-content: center;
            margin-bottom: var(--spacing-lg);
        }

        .code-input {
            width: 48px;
            height: 56px;
            border: 2px solid var(--gray-300);
            border-radius: var(--radius-md);
            font-size: 1.5rem;
            font-weight: 700;
            text-align: center;
            color: var(--gray-900);
        }

        .code-input:focus {
            border-color: var(--primary);
            outline: none;
        }

        .resend-code {
            text-align: center;
            margin-top: var(--spacing-md);
        }

        .resend-code span {
            color: var(--gray-500);
            font-size: 0.875rem;
        }

        .resend-code button {
            color: var(--primary);
            font-size: 0.875rem;
            font-weight: 600;
        }

        .resend-code button:disabled {
            color: var(--gray-400);
        }

        .password-requirements {
            background: var(--gray-50);
            border-radius: var(--radius-md);
            padding: var(--spacing-md);
            margin-top: var(--spacing-md);
        }

        .password-requirements p {
            font-size: 0.8125rem;
            color: var(--gray-600);
            margin-bottom: var(--spacing-sm);
        }

        .requirement {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            font-size: 0.8125rem;
            color: var(--gray-500);
            margin-bottom: 4px;
        }

        .requirement i {
            font-size: 0.75rem;
        }

        .requirement.valid {
            color: var(--success);
        }

        .requirement.valid i {
            color: var(--success);
        }

        .success-message {
            text-align: center;
            padding: var(--spacing-xl);
        }

        .success-icon {
            width: 80px;
            height: 80px;
            background: var(--success-light);
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto var(--spacing-lg);
        }

        .success-icon i {
            font-size: 2rem;
            color: var(--success);
        }
    </style>
</head>

<body>
    <div class="app">
        <div class="auth-page">
            <!-- Header -->
            <div class="auth-header">
                <a href="login.html" class="back-btn" style="position: absolute; left: var(--spacing-md); top: var(--spacing-md);">
                    <i class="fas fa-arrow-left"></i>
                </a>
            </div>

            <!-- Step 1: Enter Phone/Email -->
            <div class="auth-form" id="step1">
                <div class="reset-illustration">
                    <i class="fas fa-key"></i>
                </div>

                <div class="step-indicator">
                    <div class="step-dot active"></div>
                    <div class="step-dot"></div>
                    <div class="step-dot"></div>
                </div>

                <h1 style="font-size: 1.25rem; font-weight: 700; text-align: center; margin-bottom: var(--spacing-sm);">
                    Забыли пароль?
                </h1>
                <p style="text-align: center; color: var(--gray-600); font-size: 0.9375rem; margin-bottom: var(--spacing-xl);">
                    Введите номер телефона или email, и мы отправим вам код для восстановления
                </p>

                <div class="form-group">
                    <label class="form-label">Телефон или email</label>
                    <div class="form-input-icon">
                        <i class="fas fa-user"></i>
                        <input type="text" class="form-input" placeholder="+7 (___) ___-__-__" id="phone-email">
                    </div>
                </div>

                <button class="btn btn-primary btn-lg btn-block" onclick="showStep2()">
                    Получить код
                </button>
            </div>

            <!-- Step 2: Enter Code -->
            <div class="auth-form" id="step2" style="display: none;">
                <div class="reset-illustration">
                    <i class="fas fa-envelope-open-text"></i>
                </div>

                <div class="step-indicator">
                    <div class="step-dot"></div>
                    <div class="step-dot active"></div>
                    <div class="step-dot"></div>
                </div>

                <h1 style="font-size: 1.25rem; font-weight: 700; text-align: center; margin-bottom: var(--spacing-sm);">
                    Введите код
                </h1>
                <p style="text-align: center; color: var(--gray-600); font-size: 0.9375rem; margin-bottom: var(--spacing-xl);">
                    Мы отправили 6-значный код на<br>
                    <strong id="sent-to">+7 700 *** ** 67</strong>
                </p>

                <div class="code-inputs">
                    <input type="text" class="code-input" maxlength="1" oninput="moveToNext(this, 1)">
                    <input type="text" class="code-input" maxlength="1" oninput="moveToNext(this, 2)">
                    <input type="text" class="code-input" maxlength="1" oninput="moveToNext(this, 3)">
                    <input type="text" class="code-input" maxlength="1" oninput="moveToNext(this, 4)">
                    <input type="text" class="code-input" maxlength="1" oninput="moveToNext(this, 5)">
                    <input type="text" class="code-input" maxlength="1" oninput="moveToNext(this, 6)">
                </div>

                <button class="btn btn-primary btn-lg btn-block" onclick="showStep3()">
                    Подтвердить
                </button>

                <div class="resend-code">
                    <span>Не получили код? </span>
                    <button id="resend-btn" disabled onclick="resendCode()">
                        Отправить снова (<span id="countdown">60</span>с)
                    </button>
                </div>
            </div>

            <!-- Step 3: New Password -->
            <div class="auth-form" id="step3" style="display: none;">
                <div class="reset-illustration">
                    <i class="fas fa-lock"></i>
                </div>

                <div class="step-indicator">
                    <div class="step-dot"></div>
                    <div class="step-dot"></div>
                    <div class="step-dot active"></div>
                </div>

                <h1 style="font-size: 1.25rem; font-weight: 700; text-align: center; margin-bottom: var(--spacing-sm);">
                    Новый пароль
                </h1>
                <p style="text-align: center; color: var(--gray-600); font-size: 0.9375rem; margin-bottom: var(--spacing-xl);">
                    Создайте новый надёжный пароль
                </p>

                <div class="form-group">
                    <label class="form-label">Новый пароль</label>
                    <div class="form-input-icon">
                        <i class="fas fa-lock"></i>
                        <input type="password" class="form-input" placeholder="Введите пароль" id="new-password" oninput="checkPassword()">
                        <button class="toggle-password" onclick="togglePassword('new-password')">
                            <i class="far fa-eye"></i>
                        </button>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Подтвердите пароль</label>
                    <div class="form-input-icon">
                        <i class="fas fa-lock"></i>
                        <input type="password" class="form-input" placeholder="Повторите пароль" id="confirm-password">
                        <button class="toggle-password" onclick="togglePassword('confirm-password')">
                            <i class="far fa-eye"></i>
                        </button>
                    </div>
                </div>

                <div class="password-requirements">
                    <p>Пароль должен содержать:</p>
                    <div class="requirement" id="req-length">
                        <i class="fas fa-circle"></i>
                        Минимум 8 символов
                    </div>
                    <div class="requirement" id="req-upper">
                        <i class="fas fa-circle"></i>
                        Заглавную букву
                    </div>
                    <div class="requirement" id="req-lower">
                        <i class="fas fa-circle"></i>
                        Строчную букву
                    </div>
                    <div class="requirement" id="req-number">
                        <i class="fas fa-circle"></i>
                        Цифру
                    </div>
                </div>

                <button class="btn btn-primary btn-lg btn-block mt-lg" onclick="showSuccess()">
                    Сохранить пароль
                </button>
            </div>

            <!-- Success -->
            <div class="auth-form" id="success" style="display: none;">
                <div class="success-message">
                    <div class="success-icon">
                        <i class="fas fa-check"></i>
                    </div>
                    <h1 style="font-size: 1.25rem; font-weight: 700; margin-bottom: var(--spacing-sm);">
                        Пароль изменён!
                    </h1>
                    <p style="color: var(--gray-600); font-size: 0.9375rem; margin-bottom: var(--spacing-xl);">
                        Ваш пароль успешно изменён. Теперь вы можете войти с новым паролем.
                    </p>
                    <a href="login.html" class="btn btn-primary btn-lg btn-block">
                        Войти
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script>
        let countdownInterval;

        function showStep2() {
            document.getElementById('step1').style.display = 'none';
            document.getElementById('step2').style.display = 'block';
            startCountdown();
            document.querySelector('.code-input').focus();
        }

        function showStep3() {
            document.getElementById('step2').style.display = 'none';
            document.getElementById('step3').style.display = 'block';
        }

        function showSuccess() {
            document.getElementById('step3').style.display = 'none';
            document.getElementById('success').style.display = 'block';
        }

        function moveToNext(input, index) {
            const inputs = document.querySelectorAll('.code-input');
            if (input.value.length === 1 && index < inputs.length) {
                inputs[index].focus();
            }
        }

        function startCountdown() {
            let seconds = 60;
            const countdownEl = document.getElementById('countdown');
            const resendBtn = document.getElementById('resend-btn');

            countdownInterval = setInterval(() => {
                seconds--;
                countdownEl.textContent = seconds;

                if (seconds <= 0) {
                    clearInterval(countdownInterval);
                    resendBtn.disabled = false;
                    resendBtn.innerHTML = 'Отправить снова';
                }
            }, 1000);
        }

        function resendCode() {
            const resendBtn = document.getElementById('resend-btn');
            resendBtn.disabled = true;
            resendBtn.innerHTML = 'Отправить снова (<span id="countdown">60</span>с)';
            startCountdown();
        }

        function togglePassword(inputId) {
            const input = document.getElementById(inputId);
            const icon = input.parentElement.querySelector('.toggle-password i');
            if (input.type === 'password') {
                input.type = 'text';
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
            } else {
                input.type = 'password';
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            }
        }

        function checkPassword() {
            const password = document.getElementById('new-password').value;

            const reqLength = document.getElementById('req-length');
            const reqUpper = document.getElementById('req-upper');
            const reqLower = document.getElementById('req-lower');
            const reqNumber = document.getElementById('req-number');

            // Check length
            if (password.length >= 8) {
                reqLength.classList.add('valid');
                reqLength.querySelector('i').classList.replace('fa-circle', 'fa-check-circle');
            } else {
                reqLength.classList.remove('valid');
                reqLength.querySelector('i').classList.replace('fa-check-circle', 'fa-circle');
            }

            // Check uppercase
            if (/[A-Z]/.test(password)) {
                reqUpper.classList.add('valid');
                reqUpper.querySelector('i').classList.replace('fa-circle', 'fa-check-circle');
            } else {
                reqUpper.classList.remove('valid');
                reqUpper.querySelector('i').classList.replace('fa-check-circle', 'fa-circle');
            }

            // Check lowercase
            if (/[a-z]/.test(password)) {
                reqLower.classList.add('valid');
                reqLower.querySelector('i').classList.replace('fa-circle', 'fa-check-circle');
            } else {
                reqLower.classList.remove('valid');
                reqLower.querySelector('i').classList.replace('fa-check-circle', 'fa-circle');
            }

            // Check number
            if (/[0-9]/.test(password)) {
                reqNumber.classList.add('valid');
                reqNumber.querySelector('i').classList.replace('fa-circle', 'fa-check-circle');
            } else {
                reqNumber.classList.remove('valid');
                reqNumber.querySelector('i').classList.replace('fa-check-circle', 'fa-circle');
            }
        }
    </script>
</body>

</html>
